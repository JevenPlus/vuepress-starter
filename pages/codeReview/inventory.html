<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>主讲人：朱雪萍 | 无忧达</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/vuepress-starter/favicon.ico">
    <meta name="description" content="知识库">
    
    <link rel="preload" href="/vuepress-starter/assets/css/0.styles.3cbd237b.css" as="style"><link rel="preload" href="/vuepress-starter/assets/js/app.746763ae.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/2.b2f8d863.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/30.ef5a9da7.js" as="script"><link rel="prefetch" href="/vuepress-starter/assets/js/10.149efce1.js"><link rel="prefetch" href="/vuepress-starter/assets/js/11.a4392758.js"><link rel="prefetch" href="/vuepress-starter/assets/js/12.6d3396e7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/13.69223043.js"><link rel="prefetch" href="/vuepress-starter/assets/js/14.a3bc1d36.js"><link rel="prefetch" href="/vuepress-starter/assets/js/15.277611cf.js"><link rel="prefetch" href="/vuepress-starter/assets/js/16.438b3af2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/17.62a43830.js"><link rel="prefetch" href="/vuepress-starter/assets/js/18.7ad61fdc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/19.475e8afc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/20.8269f210.js"><link rel="prefetch" href="/vuepress-starter/assets/js/21.1690cee0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/22.784fc9bb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/23.414ba6b0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/24.c6ddd853.js"><link rel="prefetch" href="/vuepress-starter/assets/js/25.2357ba9b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/26.67f79d54.js"><link rel="prefetch" href="/vuepress-starter/assets/js/27.b49ca187.js"><link rel="prefetch" href="/vuepress-starter/assets/js/28.5aaea046.js"><link rel="prefetch" href="/vuepress-starter/assets/js/29.621399b2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/3.11d9e37f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/31.94b6c662.js"><link rel="prefetch" href="/vuepress-starter/assets/js/32.dd09db6c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/33.465edda2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/34.0066ec84.js"><link rel="prefetch" href="/vuepress-starter/assets/js/35.0f05dd84.js"><link rel="prefetch" href="/vuepress-starter/assets/js/36.0a0bbe46.js"><link rel="prefetch" href="/vuepress-starter/assets/js/37.60248ed3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/38.37876c18.js"><link rel="prefetch" href="/vuepress-starter/assets/js/39.a8bd56ca.js"><link rel="prefetch" href="/vuepress-starter/assets/js/4.ed65b5b9.js"><link rel="prefetch" href="/vuepress-starter/assets/js/40.2c2a1eba.js"><link rel="prefetch" href="/vuepress-starter/assets/js/41.56c77fe2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/42.b522ebc4.js"><link rel="prefetch" href="/vuepress-starter/assets/js/43.2296f860.js"><link rel="prefetch" href="/vuepress-starter/assets/js/44.d29d868d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/45.0db24ee6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/46.5484c614.js"><link rel="prefetch" href="/vuepress-starter/assets/js/47.fc6698d8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/48.218763be.js"><link rel="prefetch" href="/vuepress-starter/assets/js/49.e959aec6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/5.fca9f0eb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/50.412c4d99.js"><link rel="prefetch" href="/vuepress-starter/assets/js/51.e996d5e3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/52.5730f47e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/53.1522b89d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/54.6aacbe31.js"><link rel="prefetch" href="/vuepress-starter/assets/js/55.697ad180.js"><link rel="prefetch" href="/vuepress-starter/assets/js/56.52b1142b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/57.6d47fb07.js"><link rel="prefetch" href="/vuepress-starter/assets/js/58.ed8ba93c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/59.f392bf49.js"><link rel="prefetch" href="/vuepress-starter/assets/js/6.850d1fc0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/60.535c2976.js"><link rel="prefetch" href="/vuepress-starter/assets/js/61.96642ecf.js"><link rel="prefetch" href="/vuepress-starter/assets/js/62.3803910e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/63.5551ccd5.js"><link rel="prefetch" href="/vuepress-starter/assets/js/64.545f3556.js"><link rel="prefetch" href="/vuepress-starter/assets/js/65.364624bb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/66.5450247f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/67.e26b4923.js"><link rel="prefetch" href="/vuepress-starter/assets/js/68.b29f0c76.js"><link rel="prefetch" href="/vuepress-starter/assets/js/7.a96ddcc6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/8.5bcfdf16.js"><link rel="prefetch" href="/vuepress-starter/assets/js/9.8390ceb3.js">
    <link rel="stylesheet" href="/vuepress-starter/assets/css/0.styles.3cbd237b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-starter/" class="home-link router-link-active"><img src="/vuepress-starter/img/blob.png" alt="无忧达" class="logo"> <span class="site-name can-hide">无忧达</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="basic" class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow down"></span></button> <button type="button" aria-label="basic" class="mobile-dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/html/html.html" class="nav-link">
  HTML+Css
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/JavaScript/basic.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/TypeScript/BasicType.html" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="frame" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="frame" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/vue/columnMerge.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/react/React.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/flutter/dart-grammar.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/express/express.html" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/nest/nest.html" class="nav-link">
  Nest
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="project" class="dropdown-title"><span class="title">项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="project" class="mobile-dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/auth/jurisdiction.html" class="nav-link">
  公司系统
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/wms/wms.html" class="nav-link">
  WMS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/pda/abnormal.html" class="nav-link">
  PDA
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/crm/framework.html" class="nav-link">
  CRM
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/supplier/supplier.html" class="nav-link">
  供应商考核
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-starter/pages/standard/git.html" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeReview/picking.html" class="nav-link">
  CodeReview
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/newcomers/newcomers.html" class="nav-link">
  新人须知
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeing/structure.html" class="nav-link">
  JavaScript编码规范
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="basic" class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow down"></span></button> <button type="button" aria-label="basic" class="mobile-dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/html/html.html" class="nav-link">
  HTML+Css
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/JavaScript/basic.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/TypeScript/BasicType.html" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="frame" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="frame" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/vue/columnMerge.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/react/React.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/flutter/dart-grammar.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/express/express.html" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/nest/nest.html" class="nav-link">
  Nest
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="project" class="dropdown-title"><span class="title">项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="project" class="mobile-dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/auth/jurisdiction.html" class="nav-link">
  公司系统
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/wms/wms.html" class="nav-link">
  WMS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/pda/abnormal.html" class="nav-link">
  PDA
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/crm/framework.html" class="nav-link">
  CRM
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/supplier/supplier.html" class="nav-link">
  供应商考核
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-starter/pages/standard/git.html" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeReview/picking.html" class="nav-link">
  CodeReview
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/newcomers/newcomers.html" class="nav-link">
  新人须知
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeing/structure.html" class="nav-link">
  JavaScript编码规范
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>CodeReview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-starter/pages/codeReview/picking.html" class="sidebar-link">2022-11-10-肖柢</a></li><li><a href="/vuepress-starter/pages/codeReview/basicsetBlackAndWhite.html" class="sidebar-link">2022-11-24-郑凯力</a></li><li><a href="/vuepress-starter/pages/codeReview/receipt.html" class="sidebar-link">2022-12-01-刘宁刚</a></li><li><a href="/vuepress-starter/pages/codeReview/adjustment.html" class="sidebar-link">2022-12-08-朱雪萍</a></li><li><a href="/vuepress-starter/pages/codeReview/distribution.html" class="sidebar-link">2022-12-15-肖柢</a></li><li><a href="/vuepress-starter/pages/codeReview/inventory.html" aria-current="page" class="active sidebar-link">2023-01-05-朱雪萍</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-starter/pages/codeReview/pda_abnormalGoods.html" class="sidebar-link">2023-01-12-郑凯力</a></li><li><a href="/vuepress-starter/pages/codeReview/canvas.html" class="sidebar-link">2023-02-06-傅霓</a></li><li><a href="/vuepress-starter/pages/codeReview/report.html" class="sidebar-link">2023-02-16-朱雪萍</a></li><li><a href="/vuepress-starter/pages/codeReview/inboundPDA.html" class="sidebar-link">2023-03-09-郑凯力</a></li><li><a href="/vuepress-starter/pages/codeReview/mergeTable.html" class="sidebar-link">2023-03-23-缪靖森</a></li><li><a href="/vuepress-starter/pages/codeReview/pdaPallet.html" class="sidebar-link">2023-04-14-朱雪萍</a></li><li><a href="/vuepress-starter/pages/codeReview/tobFlowchart.html" class="sidebar-link">2023-05-22-肖柢</a></li><li><a href="/vuepress-starter/pages/codeReview/inboundFlow.html" class="sidebar-link">2023-05-29-郑凯力</a></li><li><a href="/vuepress-starter/pages/codeReview/claim.html" class="sidebar-link">2023-06-12-朱雪萍</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="主讲人-朱雪萍"><a href="#主讲人-朱雪萍" class="header-anchor">#</a> 主讲人：朱雪萍</h3> <h3 id="盘点单"><a href="#盘点单" class="header-anchor">#</a> 盘点单</h3> <h3 id="_2023-01-05"><a href="#_2023-01-05" class="header-anchor">#</a> 2023-01-05</h3> <h3 id="需求"><a href="#需求" class="header-anchor">#</a> 需求</h3> <p>满足库内商品的数量清点工作</p> <h3 id="功能理解"><a href="#功能理解" class="header-anchor">#</a> 功能理解</h3> <ul><li>盘点类型：产品盘点，库位盘点</li> <li>盘点方式：明盘，暗盘（区别在于打印盘点上是否显示数量）</li> <li>三端都可创建盘点单，oms只可进行产品盘点，wms,owms既可进行产品盘点，也可进行库位盘点</li> <li>收费对象：oms不选择收费对象，默认为客户，owms默认为仓库，当收费对象为客户时，要指定客户
<ul><li>仓库(不收取任何费用)</li> <li>客户(流水记录用户应收应付费用)</li> <li>无忧达（流水记录无忧达应付费用）</li></ul></li> <li>计费方式：
<ul><li>产品盘点-计件收费：按件、按箱、按托</li> <li>库位盘点-计件收费：按储位计费</li> <li>工时收费：按工时、按加班</li></ul></li> <li>库位盘点时选择库位，带出该库位下的所有产品明细</li> <li>如果有正在盘点中的明细，报错提示,如果sku有带拣货库存，需要重新选择明细</li> <li>oms创建的盘点单同步到wms进行审核，审核时wms需要给oms创建的盘点单选择计费方式，wms,owms自己创建的单子自己审核，wms创建时选择计费方式，owms不选择计费方式，审核通过以后owms进行盘点操作，再将信息同步回wms和oms</li> <li>如果有异常（盘盈，盘亏，破损），owms列表记录异常数量，oms/wms可以进行复盘/异常确认</li> <li>盘点完成后，盘盈/亏，破损都不影响库存数量，初盘时才收费，复盘不收费</li></ul> <h3 id="code"><a href="#code" class="header-anchor">#</a> Code</h3> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token comment">&lt;!-- 进度 --&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>w-steps</span> <span class="token attr-name">:active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getStepList.active<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>success<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getStepList.steps.length &gt; 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>w-step</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in getStepList.steps<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:text-status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.status<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:description</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.description<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>w-step</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>w-steps</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 费用信息 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SecondEl_Table</span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeTab == '2'<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:summary-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getSummaries<span class="token punctuation">&quot;</span></span> <span class="token attr-name">show-summary</span>
  <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableData_cost<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fit</span> <span class="token attr-name">highlight-current-row</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span>
  <span class="token attr-name">:header-cell-style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableHeaderColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content-table<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 序号 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_index')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>80<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token comment">&lt;!-- 费用类型 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_costType')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- {{scope.row.checkKindCost === '0' &amp;&amp; $t('common.expenseClass_F19') || '--'}} --&gt;</span>
      {{ valueConvertLabel( options_costType, scope.row.costItemArCode) }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 结算金额 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_cost')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arAmount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 结算币种 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_currency')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arCurrency<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 扣费金额 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_deductionAmount')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deductionAmount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">slot-scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-popover</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope.row.deductionRecordList.length<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">trigger</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hover<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SecondEl_Table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope.row.deductionRecordList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:header-cell-style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableHeaderColor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token comment">&lt;!-- 币种 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currency<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_currency')<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token comment">&lt;!-- 扣款金额 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>amount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_cost')<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
          <span class="token comment">&lt;!-- 汇率 --&gt;</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_rate')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">align</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SecondEl_Table</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reference<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scope.row.deductionRecordList.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          {{ scope.row.deductionAmount }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-popover</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>{{ scope.row.deductionAmount }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 扣费币种 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_deductionCurrency')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deductionCurrency<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 计费时间 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">:label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$t('common.costDetail_tableItem_createTime')<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>billingTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SecondEl_Table</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取步骤信息</span>
<span class="token function">getStepList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * 0: 待提交, 1: 待审核, 2: 审核通过, 3: 审核驳回, 4: 初盘完成, 5: 复盘中, 6: 复盘完成, 7: 完成
   */</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> documentStatus<span class="token punctuation">,</span> checkFinishTime <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>submitform <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ns <span class="token operator">=</span>
    documentStatus <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> documentStatus <span class="token operator">?</span> <span class="token function">Number</span><span class="token punctuation">(</span>documentStatus<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getVal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">page_InventoryManage.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 各阶段对应的文案</span>
  <span class="token keyword">const</span> strObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 待提交</span>
    <span class="token number">0</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 待审核</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 待盘点（审核通过）</span>
    <span class="token number">2</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 初盘中(审核通过)</span>
    <span class="token comment">// 2: getVal(&quot;dictionary1_string9&quot;),</span>
    <span class="token comment">// 审核驳回</span>
    <span class="token number">3</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 初盘完成</span>
    <span class="token number">4</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 复盘中</span>
    <span class="token number">5</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 复盘完成</span>
    <span class="token number">6</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 完成</span>
    <span class="token number">7</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 盘点中</span>
    <span class="token number">8</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 待复盘</span>
    <span class="token number">9</span><span class="token operator">:</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string11&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 显示完成状态的阶段</span>
  <span class="token keyword">const</span> statusObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token number">4</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>
    <span class="token number">6</span><span class="token operator">:</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 各阶段对应的文案</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> strObj<span class="token punctuation">[</span>ns<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;tab_Submit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> strObj<span class="token punctuation">[</span>ns<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;Approved&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span>
        <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> strObj<span class="token punctuation">[</span>ns<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_Inventory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span>
        <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> strObj<span class="token punctuation">[</span>ns<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;dictionary1_string8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">description</span><span class="token operator">:</span>
        <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
          <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">getVal</span><span class="token punctuation">(</span><span class="token string">&quot;toolLabel&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>checkFinishTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
        <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 当前所在阶段</span>
  <span class="token keyword">let</span> active <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> hasActie <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> steps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> sObj <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> obj<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      <span class="token literal-property property">description</span><span class="token operator">:</span> obj<span class="token punctuation">.</span>description<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>active<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      active <span class="token operator">=</span> index<span class="token punctuation">;</span>
      hasActie <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      sObj<span class="token punctuation">.</span>status <span class="token operator">=</span> statusObj<span class="token punctuation">[</span>ns<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hasActie <span class="token operator">&amp;&amp;</span> index <span class="token operator">===</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      active <span class="token operator">=</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    steps<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>sObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    active<span class="token punctuation">,</span>
    steps<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 费用信息合计</span>
<span class="token function">getSummaries</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只计算第二列和第三列的总额</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> columns<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> param<span class="token punctuation">;</span>
  <span class="token keyword">const</span> sums <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  columns<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">column<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sums<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&quot;common.costDetail_tableItem_summary&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sums<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>column<span class="token punctuation">.</span>property<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> values <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span>column<span class="token punctuation">.</span>property<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sums<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> values
        <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> curr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>curr<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isNaN</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> prev <span class="token operator">+</span> curr<span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> prev<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      sums<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>submitform<span class="token punctuation">.</span>totalCost <span class="token operator">=</span> sums<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> sums<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> sums<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

</code></pre></div><h3 id="学习心得"><a href="#学习心得" class="header-anchor">#</a> 学习心得</h3> <ul><li>代码不规范：单双引号的使用，逗号，分号，换行的的格式不严谨</li> <li>代码编写顺序没有计划，主次代码混乱</li> <li>冗余代码没有及时删除</li> <li>缺少必要的注释</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">last updated:</span> <span class="time">1/30/2023, 11:32:35 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-starter/pages/codeReview/distribution.html" class="prev">
        2022-12-15-肖柢
      </a></span> <span class="next"><a href="/vuepress-starter/pages/codeReview/pda_abnormalGoods.html">
        2023-01-12-郑凯力
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-starter/assets/js/app.746763ae.js" defer></script><script src="/vuepress-starter/assets/js/2.b2f8d863.js" defer></script><script src="/vuepress-starter/assets/js/30.ef5a9da7.js" defer></script>
  </body>
</html>
