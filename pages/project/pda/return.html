<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开发者 | 无忧达</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/vuepress-starter/favicon.ico">
    <meta name="description" content="知识库">
    
    <link rel="preload" href="/vuepress-starter/assets/css/0.styles.3cbd237b.css" as="style"><link rel="preload" href="/vuepress-starter/assets/js/app.746763ae.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/2.b2f8d863.js" as="script"><link rel="preload" href="/vuepress-starter/assets/js/7.a96ddcc6.js" as="script"><link rel="prefetch" href="/vuepress-starter/assets/js/10.149efce1.js"><link rel="prefetch" href="/vuepress-starter/assets/js/11.a4392758.js"><link rel="prefetch" href="/vuepress-starter/assets/js/12.6d3396e7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/13.69223043.js"><link rel="prefetch" href="/vuepress-starter/assets/js/14.a3bc1d36.js"><link rel="prefetch" href="/vuepress-starter/assets/js/15.277611cf.js"><link rel="prefetch" href="/vuepress-starter/assets/js/16.438b3af2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/17.62a43830.js"><link rel="prefetch" href="/vuepress-starter/assets/js/18.7ad61fdc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/19.475e8afc.js"><link rel="prefetch" href="/vuepress-starter/assets/js/20.8269f210.js"><link rel="prefetch" href="/vuepress-starter/assets/js/21.1690cee0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/22.784fc9bb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/23.414ba6b0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/24.c6ddd853.js"><link rel="prefetch" href="/vuepress-starter/assets/js/25.2357ba9b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/26.67f79d54.js"><link rel="prefetch" href="/vuepress-starter/assets/js/27.b49ca187.js"><link rel="prefetch" href="/vuepress-starter/assets/js/28.5aaea046.js"><link rel="prefetch" href="/vuepress-starter/assets/js/29.621399b2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/3.11d9e37f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/30.ef5a9da7.js"><link rel="prefetch" href="/vuepress-starter/assets/js/31.94b6c662.js"><link rel="prefetch" href="/vuepress-starter/assets/js/32.dd09db6c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/33.465edda2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/34.0066ec84.js"><link rel="prefetch" href="/vuepress-starter/assets/js/35.0f05dd84.js"><link rel="prefetch" href="/vuepress-starter/assets/js/36.0a0bbe46.js"><link rel="prefetch" href="/vuepress-starter/assets/js/37.60248ed3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/38.37876c18.js"><link rel="prefetch" href="/vuepress-starter/assets/js/39.a8bd56ca.js"><link rel="prefetch" href="/vuepress-starter/assets/js/4.ed65b5b9.js"><link rel="prefetch" href="/vuepress-starter/assets/js/40.2c2a1eba.js"><link rel="prefetch" href="/vuepress-starter/assets/js/41.56c77fe2.js"><link rel="prefetch" href="/vuepress-starter/assets/js/42.b522ebc4.js"><link rel="prefetch" href="/vuepress-starter/assets/js/43.2296f860.js"><link rel="prefetch" href="/vuepress-starter/assets/js/44.d29d868d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/45.0db24ee6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/46.5484c614.js"><link rel="prefetch" href="/vuepress-starter/assets/js/47.fc6698d8.js"><link rel="prefetch" href="/vuepress-starter/assets/js/48.218763be.js"><link rel="prefetch" href="/vuepress-starter/assets/js/49.e959aec6.js"><link rel="prefetch" href="/vuepress-starter/assets/js/5.fca9f0eb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/50.412c4d99.js"><link rel="prefetch" href="/vuepress-starter/assets/js/51.e996d5e3.js"><link rel="prefetch" href="/vuepress-starter/assets/js/52.5730f47e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/53.1522b89d.js"><link rel="prefetch" href="/vuepress-starter/assets/js/54.6aacbe31.js"><link rel="prefetch" href="/vuepress-starter/assets/js/55.697ad180.js"><link rel="prefetch" href="/vuepress-starter/assets/js/56.52b1142b.js"><link rel="prefetch" href="/vuepress-starter/assets/js/57.6d47fb07.js"><link rel="prefetch" href="/vuepress-starter/assets/js/58.ed8ba93c.js"><link rel="prefetch" href="/vuepress-starter/assets/js/59.f392bf49.js"><link rel="prefetch" href="/vuepress-starter/assets/js/6.850d1fc0.js"><link rel="prefetch" href="/vuepress-starter/assets/js/60.535c2976.js"><link rel="prefetch" href="/vuepress-starter/assets/js/61.96642ecf.js"><link rel="prefetch" href="/vuepress-starter/assets/js/62.3803910e.js"><link rel="prefetch" href="/vuepress-starter/assets/js/63.5551ccd5.js"><link rel="prefetch" href="/vuepress-starter/assets/js/64.545f3556.js"><link rel="prefetch" href="/vuepress-starter/assets/js/65.364624bb.js"><link rel="prefetch" href="/vuepress-starter/assets/js/66.5450247f.js"><link rel="prefetch" href="/vuepress-starter/assets/js/67.e26b4923.js"><link rel="prefetch" href="/vuepress-starter/assets/js/68.b29f0c76.js"><link rel="prefetch" href="/vuepress-starter/assets/js/8.5bcfdf16.js"><link rel="prefetch" href="/vuepress-starter/assets/js/9.8390ceb3.js">
    <link rel="stylesheet" href="/vuepress-starter/assets/css/0.styles.3cbd237b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-starter/" class="home-link router-link-active"><img src="/vuepress-starter/img/blob.png" alt="无忧达" class="logo"> <span class="site-name can-hide">无忧达</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="basic" class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow down"></span></button> <button type="button" aria-label="basic" class="mobile-dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/html/html.html" class="nav-link">
  HTML+Css
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/JavaScript/basic.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/TypeScript/BasicType.html" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="frame" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="frame" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/vue/columnMerge.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/react/React.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/flutter/dart-grammar.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/express/express.html" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/nest/nest.html" class="nav-link">
  Nest
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="project" class="dropdown-title"><span class="title">项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="project" class="mobile-dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/auth/jurisdiction.html" class="nav-link">
  公司系统
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/wms/wms.html" class="nav-link">
  WMS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/pda/abnormal.html" class="nav-link">
  PDA
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/crm/framework.html" class="nav-link">
  CRM
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/supplier/supplier.html" class="nav-link">
  供应商考核
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-starter/pages/standard/git.html" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeReview/picking.html" class="nav-link">
  CodeReview
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/newcomers/newcomers.html" class="nav-link">
  新人须知
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeing/structure.html" class="nav-link">
  JavaScript编码规范
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="basic" class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow down"></span></button> <button type="button" aria-label="basic" class="mobile-dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/html/html.html" class="nav-link">
  HTML+Css
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/JavaScript/basic.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/TypeScript/BasicType.html" class="nav-link">
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="frame" class="dropdown-title"><span class="title">框架</span> <span class="arrow down"></span></button> <button type="button" aria-label="frame" class="mobile-dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/vue/columnMerge.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/react/React.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/flutter/dart-grammar.html" class="nav-link">
  Flutter
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Node" class="dropdown-title"><span class="title">Node</span> <span class="arrow down"></span></button> <button type="button" aria-label="Node" class="mobile-dropdown-title"><span class="title">Node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/express/express.html" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/node/nest/nest.html" class="nav-link">
  Nest
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="project" class="dropdown-title"><span class="title">项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="project" class="mobile-dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/auth/jurisdiction.html" class="nav-link">
  公司系统
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/wms/wms.html" class="nav-link">
  WMS
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/pda/abnormal.html" class="nav-link">
  PDA
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/crm/framework.html" class="nav-link">
  CRM
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-starter/pages/project/supplier/supplier.html" class="nav-link">
  供应商考核
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress-starter/pages/standard/git.html" class="nav-link">
  规范
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeReview/picking.html" class="nav-link">
  CodeReview
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/newcomers/newcomers.html" class="nav-link">
  新人须知
</a></div><div class="nav-item"><a href="/vuepress-starter/pages/codeing/structure.html" class="nav-link">
  JavaScript编码规范
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>PDA</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress-starter/pages/project/pda/abnormal.html" class="sidebar-link">上架异常与收货异常</a></li><li><a href="/vuepress-starter/pages/project/pda/putaway.html" class="sidebar-link">入库-上架</a></li><li><a href="/vuepress-starter/pages/project/pda/return.html" aria-current="page" class="active sidebar-link">退件单</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/vuepress-starter/pages/project/pda/inventory.html" class="sidebar-link">盘点单</a></li><li><a href="/vuepress-starter/pages/project/pda/shiftSheet.html" class="sidebar-link">移位单</a></li><li><a href="/vuepress-starter/pages/project/pda/issue.html" class="sidebar-link">出库</a></li><li><a href="/vuepress-starter/pages/project/pda/warehouse.html" class="sidebar-link">库内</a></li><li><a href="/vuepress-starter/pages/project/pda/second.html" class="sidebar-link">pda第二版</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h4 id="开发者"><a href="#开发者" class="header-anchor">#</a> 开发者</h4> <p>郑凯力</p> <h4 id="开发时间"><a href="#开发时间" class="header-anchor">#</a> 开发时间</h4> <p>2022-10-24</p> <h3 id="需求理解"><a href="#需求理解" class="header-anchor">#</a> 需求理解</h3> <p>仓库人员使用手持pda进行退件动作, 操作相对pc来说较为简单</p> <h3 id="退件"><a href="#退件" class="header-anchor">#</a> 退件</h3> <p>设计稿链接(新增退件):  <br> <a href="https://pixso.cn/app/editor/Bt9nFlaohu549BxHoGZq7A?icon_type=1" target="_blank" rel="noopener noreferrer">https://pixso.cn/app/editor/Bt9nFlaohu549BxHoGZq7A?icon_type=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>设计稿链接(处理退件):  <br> <a href="https://pixso.cn/app/editor/Bt9nFlaohu549BxHoGZq7A?icon_type=1" target="_blank" rel="noopener noreferrer">https://pixso.cn/app/editor/Bt9nFlaohu549BxHoGZq7A?icon_type=1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <br>接口文档地址: <a href="http://192.168.20.24:8881/api/pda/doc.html#/default_api/%E9%80%80%E4%BB%B6%E8%AE%A2%E5%8D%95%E6%8E%A7%E5%88%B6%E5%B1%82/checkSkuIsExistsUsingGET_1" target="_blank" rel="noopener noreferrer">http://192.168.20.24:8881/api/pda/doc.html#/default_api/%E9%80%80%E4%BB%B6%E8%AE%A2%E5%8D%95%E6%8E%A7%E5%88%B6%E5%B1%82/checkSkuIsExistsUsingGET_1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="新增退件"><a href="#新增退件" class="header-anchor">#</a> 新增退件</h3> <p><img src="/vuepress-starter/assets/img/addReturn.b406394e.png" alt=""></p> <h3 id="处理退件"><a href="#处理退件" class="header-anchor">#</a> 处理退件</h3> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAusAAAG5CAMAAAAAiYpuAAABX1BMVEX///95eXlAs9kzMzMAmcze//8QoM//u3ud3P97u///3J29/////97//73em1pam94zrtYzer1aMzMzWZ29ejO9elozrdYzM3udWTMzM1l7MzOdep2dWXsKns57WZ0FnM29entaer1mwuF7ent7M3t7m94oqtUjqNPD5/Qzrtd7er29/97v+fwXo9Hem3s9sdhaWZ35/f78/Pzq9vs4sNccpNKvr6+Li4t7u72dWVpaM1re8vlbent7eVosq9Vam71aM3u+m1ro6Ojh4eHBwcGtra17m529u3udm3ug2u17u969/72du52dm1p7M1re/73e3J3eu3taWVozWVqd3N57ep1we31FW3Kenp5am50zeox5YE94WDadejNeUjOQ0+ljweDe/96d3L17m70zWXudemV7ejOL0eidu9693K1aep1aWXtaelq9u/93yeSdm95Qudz/3L29u73/u51ueW57gqxdAAAT4UlEQVR42uzdP2vbQBjH8SsP4vTHOiFLQbZSQkqatXQMJVCytEMLSchWSqHQoRn7/pfec6fIHRrR2NRE5vsBn0+WBg0/PTw6gWUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYEv5UkTqOFmnxliRJjGm7EW6wgAHw0rQFSH0mTFtyPpiJULYcUjKXqo4hqzXfqpZ9xtN4vOeGeBAWKljI9MV+fLHVx0vfcxj+oEtimdsgp0GyIpkYWpjk+DGdlmP2TMXI71Yacqbq3Xq1p8169rKaPsOPPnuT5MTq2grccys/hY64zpeD3sI+3TWb+X9qrvXrOseEXoYPIWGuR7Gsu8KzXaT6MyKjG2ysWH3HirpRA/TXPd3y1pb9c2JA/8uZicEebFap/mybnVsEitfeh3PpNaj9lBEJ+5Naz3P7yuRSk8tXgOWrGOb0ml8wrVzcVI57V8q3dF2Rdt9jHV/H2t802uOTeIkXoaafnoY7JJ1jXcs7ZLphpOLvrnVA/ZzNzj9LKlJHj5a6ok6duhh/PzOb/npt67QrOt29XAxsNCHmRvvTePjyGEpJvbEWj0z/z0siDiyjlnbrDmGlGfG2HHppZWu0G89iBVtzN74LEnz3RVx0SVkffzob0QdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgL178VwZ4NnaIY36+eFmYKWQdz8hEHEOSXRb/x+9yObwqpzLt8G/yb9L8lSHrmIuJOJYnSci6d+Rj7TePUidSDVlfHCdOVEbWMQcTcbSa4zHrm7o+yN9ev/50klDXMRMTcTxKfZviJLz4Vz6Euq5ZtyIXvf+1ba6y+LZ3so45eDyOZV+Z08Jl+bv0z7ouZzHrN5e+ppfUdczG43HMfx7fnI/9+kP7LtrDnBbG/Lon65iVqTjarhizbkVlxlatqHVaatZ7nZF1zMFv9u7utWkojOP4KQ9Zkq45hzQZTeoYlbqbDoa3HSu6GzfsRJFh0angxrwTQfz/8TznJYxi68tVsvP7oFu3jF19+3CSnqXbctxbFJEwSlJuhsdKDB7dLXjOY65Dp2xZwwxT/Z+0l1XxekzMvJFlnUyOqjpB69At93Ps1i8HaFGOaB1aBK1DKNA6hGI9xzgX/4+3i6F1aCmfY1lETa1y8wv/2cEZkTvcPxRe/2kk/HsW34yJFFqH1unZwqs0LiIbK40ueLPuoOKkzSum+hB/yp7s6r5lap4Q/JNW6lpnvGfmZmaeBbFC69AqJkdZJ9x5yll/mSfHVzzcFS9odOv8UdjWOX3XuuA9vcLzreuDk6Vt/ThB69AqPR7qb8kqzkirp5cntnDBkfMD37r+J/0aJn4/Ji33ixcqIqn002DJaxh+JqB1aBWfI49h79i8JhrbNcwF3WtdcuTZTAjzlf4Y10kz1230uXtwiPU6tIvJsSQjt4+U7n7PJ1zmQqZN6z8m52QUUcnZu9R965KcOpEpWod2WZvrEz79NK2XqT3VTMRgngiZ8+rdHM+m02+67tv9r2vnpoyPfre/CK1Du/y29QXl5jpMbQd8/ySxV2X4eP/5clYqd34aK2E0rZej5YwXOtkM1xyhZTjHkhzVrGE2mZwXke5YFlHTejYmJ48p5cqz8WgX19ehbf4xx0lzbqpb15Wn2CMAXYH9MBAKtA6hQOsQij/d96t/iNbhYdiSY6zEXmJuUFrSlJQkynX7j8019rHbGoBzU+iMzTkOKqqv5pe3c77IbjY46s4lUfHJ38MxHh1VKVqHjticoy5buI1eZX1Biu9f6ue60PkPqlymvO8drUMnbMlR0uiV3cDLc/3FQcQrFzPbteLNSSLMwB/iPr3QCdvPTf1cJ74BOz/ijYwlaUrEZGCuQ0dszJFbrhd2rnPdz/Z3eXMA5fZPlZSwyhTrdeiGv5rr/FDEH+aJWa+7uW6UCuem0BFbW79zc533d+X8Zxjcup/r/E1SuOYIXdHbbEGrj6veZ6p/DuvTxbB+d02ra+LvaKseu65P8T548DDt7AiAIKB1CAVah1CgdQgFWodQoHUIBVqHUKB1CAVah1CgdQgFWodQ/GLX7lUUBqIwDJ8MB+9CAgqbFAYxmqRYsPCn2Duws7Td+69WZIt1kYg/k0zmvE+RJpDi42WKJLQOK2gdVtA6rKB1WEHrsILWYQWtwwpahxW0DitoHVbQOqygdVhB67BCUwEsyJVzHSbkI851DJTL3ANS1Uy/BBicY6rqHpA5yXWcCzAwuY4e7/akmroXFfNPATrkNJfH5d+Fe5FqehKgO0UqPcnHKSc7OuSc9OWoHwLcFcM3UN5dok1MrfOvAVpE1Ruto0VUvdE6WkTVG62jRSS9zSaTqqpUz5fJZCaAR5fesixTPV+6720511/zpQDX4uptUelFtRDAu0WhF0UvvWV6lglwS1y9rVXXAtwWV2+rleC/bd1Mk7eaNvVWnpX4JHcE3Vvy19Cn6UXd7DalvFW52TW1PMnn6Mmge7u6Hd404TvsS/Gg3B8CHD0J4AktaN2rei+e7OvwRqd1w61vm1I8KZttcKPTuuHW6514s6uDG53WDbfebMSbTRPc6LRuuPVpKd6U0+BGp3XDrf+wd74/TQNxGK9c5+1a1tqtk22gDMGfOMWoCfEX8Eb5JQLCCxI1xBhi0PjG/z/x+1xvF5z0HHQlR9MnJO16cPfke597eh0LWFi+knUbxy6ALCxfybqNYxdAFpavZN3GsQsgC8tXsm7j2AWQheUrWbdx7ALoAsr30CJLypHdBbNy7AIo//I9vTU6S82qM6TGJysGR1YXzM6xC6ArBlymfMcJhOPUOoy9qjPG2hI1Hp0ganuhYu78yeOMrANbzkghWI9Z4sObcbo+OZNevLrAAWZrDxx1Kn+mUTnNUdFY5+HgGq/dxEG3J2UYb7GkJiXrg0K9JOtgzJuhl3QA8rpgWA48NHfec+9kZx2DeLdprtq7WG6PqgE5+Ew2pDs+Md8Sf7POw/S+n7u9IrEeMD0lsT7DQl8C2kI3t6tYByhnyfo/4iiVZl3mOiGv1wFnSsLU+V03K+sYZzYl13FlvBWRybhRQWy9hc2QiKdVmOpo9KzXOn3IcslWczNqoaV4npqfrOBU3pa3qsm9uGTdtDlGgCqIklx3iHk1VzyUuW7u/I2blXWAFCa5Dktkgb7k/AbSyPYLeimNCZpZXJeZHq8nUInTHPXWSCMuGDxA+WUrmg0LLdSsJ0fFujYkyj1MWgMQo+gMhEcw6VwfjP1mlUeGzp+50A2pa8Nq0NKj45VdNZnxxBGDIkI7ipOLXEcq0T/7ilgX+EYfFsMUR9D9ERes6+eTreZmdP0lYR05pLQI/L/tY2zyxSOaQ1TF3PlYmq6OFeN/2qRX1/s+uX1b79fVLfnEfp0jR4PFOX9I1q8PqwFLtX3s12m1LW902v1cD1gkj5rmWMYWWZrwyZh3PGVkfXp62nWv9npjZ9epBYuZUpRHtpqbu/MYDrc9qPkTR3nHVWN33zNoVmBoerLB4GdjnYr1yymATNXlE75mnau5wrmkXk6h4EzkvYf5vQfWvTqSuvl17kjv11WuS8U4wlJzc2FnieY5jXU4wn79pQuNinW9ac6aredpJoZ1JeL1yRV5wj8uzyvWfQoFLrgA/upec8axX/bcIiS7qbrN1/0EiFnYf9TikTzrbsy9Q0q0qzzM99kU8cgPtlYjOFqNkOZNsK5zvdbpIx+IIKJrBzcrmvXUZ9N7h4drayMrGDxhE3OObM3Ousp1VELQi4BSgRaW9+MTDQnWEQpZWEcyXHcuvwx7mLpQKbXeanzoMCjiLEqCpLEjKRNevV3N/z1HTB9v77XoLcdY5jpn4clc53J7Hrc3FypwFQIzPLuKC3vPkUfy/f4HuWWrmXWvjv36so8XVIDFrSquq7GT202mdTZdhL/5m8PTd/bfJZmkcj0HR1ncBY0KoPJm8slWc/Mg+Cn639iW/t+nS8Q6/UbeIks5fUYgDsE7cB4+Wy/VZwRK1svPfp0/W0vWh9FlY90mS+VnekvWpSzpvGT9D3t3jMMgDERRcAuLmgsgOlfcwPe/V1BEmUghEpLtnVdQAsXUf/v7NuusB+vjxHpHf8f65+zDsM663S/WWbfnyHpi63Z6O/o71r9kf5111t3VYJ1195I6eAPrf+UO3s0Gt/5kOawP3bbF76W6u7iucSvWO28vZQ+xPn8nddhZT9BRro4Q6zPXlnK1tBDr89Zqfe+8nI9aYWd9+koJsZ4i1lnPEuusZ4l11l/s3bEKgzAUhlEKoQ/iYJcWEZ19/8eqSKdWi6Pc/3yDq8shJBlyU2Kd9ZRYZz2le4WXBrdYF+usi3XWk2Kd9ZRYZz0l1llPiXXWU2Kd9ZRYZz0l1llPiXXWU2Kd9ZRYZz0l1llPiXXWU2Kd9ZRYP37pkvVasc56SqyznhLrrKfEOuspsc56Sqz/9uy6vu9bWz9d92S9SqzvNA3t0zBZ18vE+l7jq229RnuYOrG+36OtPezXK8X6QUtri7NpqVg/ap7dw9TqpPUSA05vX5nlm9Vp69cZ8/6n20V/zfoVYp31lFhnPSXWWU+JddZTYp31lFhnPSXWWU+JddZTYv3Nrt31JAiFARw/4wEPB4ETSUWuNKMXba2XVZu2ddFVrjvb6qK+//eIB8gLt/KY4M4Oz/9CRDd048fxgJD1pkTWyXpTIutkvSmZaP2SrFOaW99xGQu6Yt2N3x1XZN0bkHWT0si6f9BmfjI+abOMPD7+b+O31+taD2WxAIDODGDfJetG1LeZUvVbD7oAn4lgvOPgWs9hmLcNEOVDPr6BCzwM/tp4yx5VY51xGfRmgl2RdTNq2UNWa+omvFN/MgXYf4pwLRb46E9cfIrWOZJfbv3Brsg6/s4EF5ysG9PIbqlhr996mEo2L/i6cebkETlSV7B+ZldgHbIkHmbegNMcxpis877dtzbY7yaOXiQHECwU6E3gArEXc5gpKFm/t7HDvK3FPlYb1xG9oHNTc7KsodWyFKrdup8ApADj3rPIQaPpub04yvSvaH13sdWs+wmUdRyybkL17wV1E1xyEebW/URkq1EJm0tEjnOKMMpfrnsOI1kZT99dGtdNSR/reB3mrRjX/STXFsviOkzHQevMe3RxrN1rs42cm+I3ivhrEpF1Q9LHejmu43wdkWOxgrOKrzly+EnE2VHFBeMQkXUj0sx6CuNued1jjf+S6B4BSoe9sBycNvcIkHWzMtA63ftF6bEX6J5eSj2yTtYpsq7pR5N1HSLrZL0pfbN3xwQAA0EIBP27jgGKtL83IwHosXVbv8LWbf0KW7f1K2zd1q+wdVu/wtZt/Qpbt/Ur/rbgB88P3uu0MEg5SQuDlJO0MEg5SQuDlJO0MEg5SQuDlJO0MEg5SQuDlJO0MEg5SQuDlJO0MEg5SQuDlJO08LFLBzcMwzAQBOP+m04D97UhrGYaIHDLwcpJKgxWTlJhsHKSCoOVk1QYrJykwmDlJBUGKyepMFg5SYXBykkqDFZOUmGwcpIKg5WTVBisnKTCYOUkFQYrJ6kwWDlJhcHKSSoMVk5SYbBykgqDlZNUGKycpMJg5SQVBisnqTBYOUmFwcpJKgxWTlJhsHKSCoOVk1QYrJykwmDlJBUGKyd9XuF51aGn/foJvv/134ueQ0/79RP4db9+C7/u12/h1/36Lfy6X7+FX/frt/Drfv0Wft2v38Kv+/Vb/Nk1296koSiOn3AKt/f2SUpZCwIVJ4LE6Iz6AsXgKzRmc4kPSzRZ1Bi//1ewp9zMCamWNWMNPb+Q0Abovy9+/ef0UnadXa8K7Dq7XhXYdXa9Kuyj6w9LF82ul4E9dP3p3dJFs+tloJyuuxLAjrwrHfzJ40KuO4M6gBpdMZpdLzGNGIpQ3PUAUzomCLzYbJsAwWJmpt572x28YTwo4rrwknQ1snuWi3O/KRBb9cLR/RiYG2dsTGA3ZAsnPG295l2E2Dr3QL22dMnrz+kyoC877016g0BuHvy5Uch1O8LOp9nxz5lJuc5UeFT0GeSNnhjc6yVgEo+Lyl7cdQlE+y2GJ0s/PJHOFIKlj3iYVqo6SmUTzXRTeODcsyDL9ftGMdfVEMDFhNBycek3XZnpev7ohvESmJvne2z0aztkTTiBmtACkbpOG/Mh/MH9IOGS8h6pnuX6M4Pop9xa5wxy4CYnIQFohpHgfO5ZdpRniNHRcSOldpnYML4BUwYmtUZth2yUK2kFf/PoeKh89FZCO4PTVbMqP51hvnTDfK4frHOW895U9zq9fe0ihRZyfXzArV5NNl0XnpAkWRc1zQBx7uOi94aEdj16pdD0IkJLDeHaZhiB2Hmle51OpW3at7eaYRgmUzjyVwLcsbTstO6hhmokVq6LZNeemeR8aiBJ7qb3rfTL4vem2b1OaaCOziXkgaLZdeZfwqkXJghJXjlTaJtCOoMfEeJH3euCBhYye7VOI0F4q6V3l/auYc3RGfzSvZ7EYOu0m2ta19HsOpMtnCCVlI/YhAvXda/TvE6S6ytiR/8lKV+6EgJs1YOOaUehpfzmNtEM81/hyPUEUotcP/QXEco9eUaAqSSVfPaLqSSVfKaXqSTsOlMV2HWmKrDrv9m7YyIAABgIYVf/pju/BhIN7FChdSq0ToXWqdA6FVqnQutUaJ2KG5EPHgAAAAAAAAAAwLMHBwIAAAAAQP6vjaCqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqrQHByQAAAAAgv6/bkegAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARwES04DBOJjz0AAAAABJRU5ErkJggg==" alt=""></p> <h3 id="其中页面分为新增退件-处理退件两个模块"><a href="#其中页面分为新增退件-处理退件两个模块" class="header-anchor">#</a> 其中页面分为新增退件, 处理退件两个模块</h3> <h3 id="新增退件-2"><a href="#新增退件-2" class="header-anchor">#</a> 新增退件</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'dart:convert'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">'package:division/division.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter/services.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter_vant_kit/main.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter_vant_kit/widgets/dialog.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter_vant_kit/widgets/stepper.dart'</span><span class="token punctuation">;</span>
<span class="token comment">// import 'package:get/get_state_manager/src/simple/get_controllers.dart';</span>
<span class="token keyword">import</span> <span class="token string">'package:get/get.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:image_picker/image_picker.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/http/inbound.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/http/shiftReturn.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/page/inventory/components/body.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/routers/return_router.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/utils/local_storage.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/utils/local_utils.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/utils/my_colors.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/commonStepDescribe.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_UI.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_btn.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_scanText.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_table.dart'</span><span class="token punctuation">;</span>
<span class="token comment">// import 'package:pda_scanner/pda_listener_mixin.dart';</span>
<span class="token keyword">import</span> <span class="token string">'package:image_picker/image_picker.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:dio/dio.dart'</span> <span class="token keyword">as</span> dioData<span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'dart:io'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/http/inbound.dart'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AddReturnController</span> <span class="token keyword">extends</span> <span class="token class-name">GetxController</span> <span class="token punctuation">{</span>
 List addReturnOrder <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>obs<span class="token punctuation">;</span>
 List orderDetailList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>obs<span class="token punctuation">;</span>
 <span class="token comment">// 初始化操作</span>
 <span class="token function">initAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   addReturnOrder <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token comment">// 存入一条数据</span>
 <span class="token function">addOneToAddShiftSheetList</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   addReturnOrder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 去重</span>
   <span class="token comment">// var checkInfo = [];</span>
   <span class="token comment">// addReturnOrder = Utils.uniqeList(dataList:addReturnOrder, checkInfo: checkInfo );</span>
 <span class="token punctuation">}</span>

 <span class="token comment">// 上报成功后操作</span>
 <span class="token function">submitCompleteAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">initAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">AddReturnOrder</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> <span class="token function">AddReturnOrder</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Key<span class="token operator">?</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token operator">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

 @override
 Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   final AddReturnController c <span class="token operator">=</span> Get<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token function">AddReturnController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 初始化</span>
   c<span class="token punctuation">.</span><span class="token function">initAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
       <span class="token literal-property property">appBar</span><span class="token operator">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
         <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'add_return_order'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token literal-property property">centerTitle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
         <span class="token literal-property property">elevation</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
         <span class="token literal-property property">leading</span><span class="token operator">:</span> <span class="token function">IconButton</span><span class="token punctuation">(</span>
           <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">Icon</span><span class="token punctuation">(</span>Icons<span class="token punctuation">.</span>arrow_back<span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token literal-property property">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> async <span class="token punctuation">{</span>
             late List addList<span class="token punctuation">;</span>
             addList <span class="token operator">=</span> c<span class="token punctuation">.</span>addReturnOrder<span class="token punctuation">;</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span>addList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token function">showDialog</span><span class="token punctuation">(</span>
                 <span class="token literal-property property">context</span><span class="token operator">:</span> context<span class="token punctuation">,</span>
                 <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token keyword">return</span> <span class="token function">MyNDialog</span><span class="token punctuation">(</span>
                       <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                       <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'${'</span>shiftSheetString_message1<span class="token string">'.tr}${addList.length}${'</span>shiftSheetString_message2<span class="token string">'.tr}'</span><span class="token punctuation">,</span>
                       <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                       <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'shiftSheetString_dialog1'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                       <span class="token literal-property property">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                         addReturnGlobalKey<span class="token punctuation">.</span>currentState<span class="token operator">?.</span><span class="token function">submit</span><span class="token punctuation">(</span>successfn<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                           Get<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                         <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">catchFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                           Get<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                       <span class="token punctuation">}</span><span class="token punctuation">,</span>
                       <span class="token literal-property property">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
               Get<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span>
           <span class="token function">IconButton</span><span class="token punctuation">(</span>
               <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token function">Icon</span><span class="token punctuation">(</span>Icons<span class="token punctuation">.</span>list_alt<span class="token punctuation">)</span><span class="token punctuation">,</span>
               <span class="token function-variable function">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                     Get<span class="token punctuation">.</span><span class="token function">toNamed</span><span class="token punctuation">(</span>ReturnOrderRouter<span class="token punctuation">.</span>addReturnDetail<span class="token punctuation">)</span><span class="token punctuation">,</span>
                   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token function">ContentBox</span><span class="token punctuation">(</span>key<span class="token operator">:</span> addReturnGlobalKey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

GlobalKey<span class="token operator">&lt;</span>_ContentState<span class="token operator">&gt;</span> addReturnGlobalKey <span class="token operator">=</span> <span class="token function">GlobalKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ContentBox</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> <span class="token function">ContentBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
   Key<span class="token operator">?</span> key<span class="token punctuation">,</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token operator">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

 _ContentState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">_ContentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">_ContentState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>ContentBox<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
 FocusNode _focusNode <span class="token operator">=</span> <span class="token function">FocusNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 final AddReturnController c <span class="token operator">=</span> Get<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment">// 来源跟踪号  获取sourceLocationController.text</span>
 final step1NoController <span class="token operator">=</span> <span class="token function">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 final step2NoController <span class="token operator">=</span> <span class="token function">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 final step2_1NoController <span class="token operator">=</span> <span class="token function">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 late Map tableData1<span class="token punctuation">;</span>
 int step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
 bool step1ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 bool step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
 bool step3ButtonEnable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
 String <span class="token constant">QTY</span> <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span>
 String orderNo <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
 String chooseCodeRadio <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 单选框选中的客户代码</span>
 String customerCode <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 客户代码</span>
 String status <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>  <span class="token comment">// 1  可匹配到订单  2 匹配不到订单,但是可以匹配到客户代码  sku情况  3 匹配不到订单, 匹配不到客户带到 (未知商品)  4 未匹配到订单(等待后续操作决定是2还是3)</span>
<span class="token comment">// TXJW  794639230306</span>
 <span class="token comment">// 客户代码列表</span>
 String lpCode <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 物流商</span>
 List orderDetailList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 List customeList <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token comment">/*    {&quot;label&quot;: '客户代码1', &quot;value&quot;: '客户代码1', &quot;id&quot;: 1},
   {&quot;label&quot;: '客户代码2', &quot;value&quot;: '客户代码2', &quot;id&quot;: 2},
 ,*/</span>
 <span class="token punctuation">]</span><span class="token punctuation">;</span>
 List customeStatusList <span class="token operator">=</span> <span class="token punctuation">[</span>
   <span class="token punctuation">{</span><span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">'returnString1'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">'0'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span><span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">'returnString2'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span><span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">'returnString3'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span> <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">]</span><span class="token punctuation">;</span>
 bool disableCustomerCode <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
 <span class="token comment">// trackingNumber  794639230306</span>

 <span class="token comment">// 货物状态</span>
 String customeStatus <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 货物良好  外包装破损 内容物破损</span>
 List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> imagesList <span class="token operator">=</span> <span class="token punctuation">[</span>
   <span class="token comment">/* &quot;https://img.yzcdn.cn/vant/leaf.jpg&quot;*/</span>
 <span class="token punctuation">]</span><span class="token punctuation">;</span>
 <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 @override
 Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">Center</span><span class="token punctuation">(</span>
     <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Column</span><span class="token punctuation">(</span>children<span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token function">Expanded</span><span class="token punctuation">(</span>
           <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">SingleChildScrollView</span><span class="token punctuation">(</span>
         <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Column</span><span class="token punctuation">(</span>
           <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">_changeContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
         <span class="token function">CommonBtn</span><span class="token punctuation">(</span>
             <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'next'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
             <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
             <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>themeColor<span class="token punctuation">,</span>
             <span class="token literal-property property">textColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
             <span class="token literal-property property">enable</span><span class="token operator">:</span> step1ButtonEnable<span class="token punctuation">,</span>
             <span class="token literal-property property">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token function">checkStep</span><span class="token punctuation">(</span> clickType<span class="token operator">:</span> <span class="token string">'next-step1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
             <span class="token comment">// onPressed: null,</span>
             <span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
         <span class="token function">CommonBtn</span><span class="token punctuation">(</span>
             <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'next'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
             <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
             <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>themeColor<span class="token punctuation">,</span>
             <span class="token literal-property property">textColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
             <span class="token literal-property property">enable</span><span class="token operator">:</span> step2ButtonEnable<span class="token punctuation">,</span>
             <span class="token literal-property property">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token function">checkStep</span><span class="token punctuation">(</span> clickType<span class="token operator">:</span> <span class="token string">'next-step2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
             <span class="token comment">// onPressed: null,</span>
             <span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
         <span class="token function">Row</span><span class="token punctuation">(</span>
           <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
             <span class="token function">Container</span><span class="token punctuation">(</span>
               <span class="token literal-property property">width</span><span class="token operator">:</span> MediaQuery<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
               <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
               <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">CommonBtn</span><span class="token punctuation">(</span>
                   <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'next_1'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                   <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
                   <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>themeColor<span class="token punctuation">,</span>
                   <span class="token literal-property property">textColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
                   <span class="token literal-property property">enable</span><span class="token operator">:</span> step3ButtonEnable<span class="token punctuation">,</span>
                   <span class="token literal-property property">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token function">handleImageData</span><span class="token punctuation">(</span>success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                       <span class="token function">initData</span><span class="token punctuation">(</span>stepData<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span>
                   <span class="token comment">// onPressed: null,</span>
                   <span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token function">Container</span><span class="token punctuation">(</span>
               <span class="token literal-property property">width</span><span class="token operator">:</span> MediaQuery<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>
               <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
               <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">CommonBtn</span><span class="token punctuation">(</span>
                   <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'complete'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                   <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
                   <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
                   <span class="token literal-property property">textColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>themeColor<span class="token punctuation">,</span>
                   <span class="token literal-property property">enable</span><span class="token operator">:</span> step3ButtonEnable<span class="token punctuation">,</span>
                   <span class="token literal-property property">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token comment">// 参数整合成相应的列表</span>
                     <span class="token function">handleImageData</span><span class="token punctuation">(</span>success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                       <span class="token function">showDialog</span><span class="token punctuation">(</span>context<span class="token operator">:</span> context<span class="token punctuation">,</span> <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">{</span>
                         <span class="token keyword">return</span> <span class="token function">MyNDialog</span><span class="token punctuation">(</span>
                             <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                             <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'returnMessage1'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                             <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                             <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'confirm'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                             <span class="token literal-property property">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                               <span class="token function">submit</span><span class="token punctuation">(</span>successfn<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                 Get<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                               <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                             <span class="token punctuation">}</span><span class="token punctuation">,</span>
                             <span class="token literal-property property">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                       
                     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span>
                   <span class="token comment">// onPressed: null,</span>
                   <span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">)</span>
       <span class="token punctuation">]</span>
     <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 
 <span class="token function">handleStep1Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> postData <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token string-property property">&quot;trackingNumber&quot;</span><span class="token operator">:</span> step1NoController<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
   ShiftReturnApi<span class="token punctuation">.</span><span class="token function">queryOutBoundOrderByTrackingNumber</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resData<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// 将商品信息填入</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           tableData1<span class="token punctuation">[</span><span class="token string">'returnString4'</span><span class="token punctuation">.</span>tr<span class="token punctuation">]</span> <span class="token operator">=</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'lpCode'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
           tableData1<span class="token punctuation">[</span><span class="token string">'returnString5'</span><span class="token punctuation">.</span>tr<span class="token punctuation">]</span> <span class="token operator">=</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'customerCode'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
           customerCode <span class="token operator">=</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'customerCode'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
           lpCode <span class="token operator">=</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'lpCode'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'orderNo'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             status <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span> <span class="token comment">// 可匹配到订单 </span>
             orderNo <span class="token operator">=</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'orderNo'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'orderNo'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'customerCode'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// 匹配不到订单 但可以匹配到客户代码</span>
           <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             status <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span> <span class="token comment">// sku情况 </span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           <span class="token comment">// 未知商品</span>
           <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             status <span class="token operator">=</span> <span class="token string">'4'</span><span class="token punctuation">;</span> <span class="token comment">// 未知商品 sku可为空</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
         <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           tableData1<span class="token punctuation">[</span><span class="token string">'returnString4'</span><span class="token punctuation">.</span>tr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
           tableData1<span class="token punctuation">[</span><span class="token string">'returnString5'</span><span class="token punctuation">.</span>tr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">// 未知商品</span>
         <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           status <span class="token operator">=</span> <span class="token string">'4'</span><span class="token punctuation">;</span> <span class="token comment">// 未知商品 sku可为空</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'returnString6'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>

   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// 按钮点击事件</span>
 <span class="token keyword">void</span> <span class="token function">keyComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;${step1NoController.text}  --1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;${step2NoController.text} --2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
   
   <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">handleStep1Info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// getSKUexistence(customerCode: );</span>
     <span class="token function">getSKUexistence1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 <span class="token function">getSKUexistence2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">getSKUexistence</span><span class="token punctuation">(</span>customerCodeData<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token function">getSKUexistence1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">getSKUexistence</span><span class="token punctuation">(</span>customerCodeData<span class="token operator">:</span> customerCode<span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// 判断是否sku是否存在</span>
 <span class="token function">getSKUexistence</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>customerCodeData<span class="token punctuation">,</span> type<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> postData <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token string-property property">&quot;skuNo&quot;</span><span class="token operator">:</span> step2NoController<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
     <span class="token string-property property">&quot;customerCode&quot;</span><span class="token operator">:</span> customerCodeData<span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
   ShiftReturnApi<span class="token punctuation">.</span><span class="token function">checkSkuIsExists</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// 判断该sku是否属于该客户</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>customerCode <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span> res<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> customerCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">showDialog</span><span class="token punctuation">(</span>context<span class="token operator">:</span> context<span class="token punctuation">,</span> <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">return</span> <span class="token function">MyNDialog</span><span class="token punctuation">(</span>
                   <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                   <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'returnMessage2'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                   <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                   <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'confirm'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                   <span class="token literal-property property">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                       step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
         <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           customeList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
           res<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>
             customeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
               <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> item<span class="token punctuation">,</span>
               <span class="token string-property property">&quot;value&quot;</span><span class="token operator">:</span> item<span class="token punctuation">,</span>
             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>customerCode <span class="token operator">==</span> <span class="token string">''</span> <span class="token operator">||</span> customerCode <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">// 如果没有值, 直接用第一个值</span>
             customerCode <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
             <span class="token comment">// print('${res['data'][0]} - ${customerCode}');</span>
           <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
         <span class="token comment">// 重新调用一遍接口, customerCode 传空, 判断这个sku是否存在系统</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token function">getSKUexistence2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           <span class="token function">showDialog</span><span class="token punctuation">(</span>context<span class="token operator">:</span> context<span class="token punctuation">,</span> <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token function">MyNDialog</span><span class="token punctuation">(</span>
                 <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                 <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'returnMessage3'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                 <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                 <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'returnDialog1'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                 <span class="token literal-property property">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     status <span class="token operator">=</span> <span class="token string">'3'</span><span class="token punctuation">;</span> <span class="token comment">// 可匹配到订单 </span>
                     step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span><span class="token punctuation">,</span>
                 <span class="token literal-property property">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token comment">// 清空数据</span>
                   <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token comment">/*// 未匹配到订单
           if (status == '4') {
             // 未知商品
             
           } else {
             showDialog(context: context, builder: (_){
               return MyNDialog(
                   title: null,
                   message: 'SKU与订单不符, 是否继续添加?',
                   showCancelButton: true,
                   confirmButtonText: '添加',
                   onConfirm: () {
                     print('点击了确定');
                   },
                   onCancel: () {
                     print('点击了取消');
                     // 清空数据
                     step2NoController.text = '';
                   });
             });
           }*/</span>

       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>

   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token comment">// 检验是否可以下一步</span>
 <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// mock</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>step1NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
       step1NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       step1ButtonEnable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       step1ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'customeStatus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// 未知商品sku可以为空, 其他情况sku不能为空</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>customeStatus <span class="token operator">!=</span> <span class="token string">''</span> <span class="token operator">&amp;&amp;</span> customeStatus <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">'3'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step2NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token string">''</span> <span class="token operator">&amp;&amp;</span> step2NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
       <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 
 <span class="token comment">// 监听键盘点击事件</span>
 <span class="token keyword">void</span> <span class="token function">onKey</span><span class="token punctuation">(</span><span class="token parameter">RawKeyEvent event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">/*  扫码枪实现 textfild 会自动把扫码枪识别的二维码带入到输入框中, 不需要额外的一些操作

   其中方法写在onSubmitted中就可以了, 不需要在onkey 那里在去额外监听enter事件*/</span>
 <span class="token punctuation">}</span>

 <span class="token function">_changeContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">Column</span><span class="token punctuation">(</span>children<span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token function">StepDescribe</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'returnString7'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token comment">// Divider(),</span>
       <span class="token function">ScanText</span><span class="token punctuation">(</span>
           <span class="token literal-property property">onKey</span><span class="token operator">:</span> onKey<span class="token punctuation">,</span>
           <span class="token literal-property property">controller</span><span class="token operator">:</span> step1NoController<span class="token punctuation">,</span>
           <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'returnString8'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
           <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token literal-property property">onSubmitted</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">print</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token function">keyComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">StepTable</span><span class="token punctuation">(</span>
         <span class="token literal-property property">dataInfo</span><span class="token operator">:</span> tableData1<span class="token punctuation">,</span>
         <span class="token literal-property property">keyWidth</span><span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
       <span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">Column</span><span class="token punctuation">(</span>children<span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token function">StepDescribe</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'shiftSheetString13'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token comment">// Divider(),</span>
       <span class="token function">Container</span><span class="token punctuation">(</span>
         <span class="token literal-property property">color</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
         <span class="token literal-property property">padding</span><span class="token operator">:</span> EdgeInsets<span class="token punctuation">.</span><span class="token function">fromLTRB</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Column</span><span class="token punctuation">(</span>
           <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span>
             <span class="token function">ScanText</span><span class="token punctuation">(</span>
               <span class="token literal-property property">onKey</span><span class="token operator">:</span> onKey<span class="token punctuation">,</span>
               <span class="token literal-property property">controller</span><span class="token operator">:</span> step2NoController<span class="token punctuation">,</span>
               <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'shiftSheetString15'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
               <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token literal-property property">onSubmitted</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token function">keyComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span><span class="token punctuation">,</span>
             <span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token function">Container</span><span class="token punctuation">(</span>
               <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
               <span class="token literal-property property">color</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
               <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Steppers</span><span class="token punctuation">(</span>
                 <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                 <span class="token literal-property property">inputWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
                 <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                 <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token constant">QTY</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
                   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token punctuation">}</span><span class="token punctuation">,</span>
               <span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">TableTitle</span><span class="token punctuation">(</span>
           <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;returnString5&quot;</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
           <span class="token literal-property property">require</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
           <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
           <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
           <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">'normal'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">ReadOnlyTableFile</span><span class="token punctuation">(</span>
           <span class="token literal-property property">text</span><span class="token operator">:</span> customerCode<span class="token punctuation">,</span>
           <span class="token literal-property property">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span>disableCustomerCode <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token keyword">if</span> <span class="token punctuation">(</span>customeList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token function">showDialog</span><span class="token punctuation">(</span>
                   <span class="token literal-property property">context</span><span class="token operator">:</span> context<span class="token punctuation">,</span>
                   <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token keyword">return</span> <span class="token function">MyNDialog</span><span class="token punctuation">(</span>
                         <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                         <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
                         <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                         <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'returnDialog2'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                         <span class="token literal-property property">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                           <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                             <span class="token keyword">if</span> <span class="token punctuation">(</span>chooseCodeRadio <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> chooseCodeRadio <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                               <span class="token comment">/* print('${chooseCodeRadio} - ${customerCode}');*/</span>
                               customerCode <span class="token operator">=</span> chooseCodeRadio<span class="token punctuation">;</span>
                             <span class="token punctuation">}</span>
                           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                         <span class="token punctuation">}</span><span class="token punctuation">,</span>
                         <span class="token literal-property property">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                         <span class="token literal-property property">showConfirmButton</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                         <span class="token comment">// closeOnClickOverlay: true,</span>
                         <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">RadioList</span><span class="token punctuation">(</span>
                             <span class="token literal-property property">needScroll</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                             <span class="token literal-property property">radioHeight</span><span class="token operator">:</span> <span class="token number">300.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                             <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                               <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                 <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                   chooseCodeRadio <span class="token operator">=</span> val<span class="token punctuation">;</span>
                                 <span class="token punctuation">}</span>
                               <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                             <span class="token punctuation">}</span><span class="token punctuation">,</span>
                             <span class="token literal-property property">listData</span><span class="token operator">:</span> customeList<span class="token punctuation">,</span>
                             <span class="token literal-property property">startValue</span><span class="token operator">:</span> customerCode
                         <span class="token punctuation">)</span>
                     <span class="token punctuation">)</span><span class="token punctuation">;</span>
                   <span class="token punctuation">}</span><span class="token punctuation">,</span>
                 <span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
             <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'点击'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">TableTitle</span><span class="token punctuation">(</span>
           <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;returnString9&quot;</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
           <span class="token literal-property property">require</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
           <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
           <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
           <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token string">'normal'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">RadioList</span><span class="token punctuation">(</span>
         <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'改变值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               customeStatus <span class="token operator">=</span> val<span class="token punctuation">;</span>
               <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
         <span class="token literal-property property">listData</span><span class="token operator">:</span> customeStatusList<span class="token punctuation">,</span>
         <span class="token literal-property property">startValue</span><span class="token operator">:</span> customeStatus<span class="token punctuation">,</span>
       <span class="token punctuation">)</span>
     <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       imagesList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token function">Column</span><span class="token punctuation">(</span>
       <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token function">StepDescribe</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'returnString10'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">,</span>
         <span class="token function">ImageWallData</span><span class="token punctuation">(</span>
           <span class="token literal-property property">images</span><span class="token operator">:</span> imagesList<span class="token punctuation">,</span>
           <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
           <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>image<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'${image} ------&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token literal-property property">onUpload</span><span class="token operator">:</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> async <span class="token punctuation">{</span>
             <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               <span class="token comment">// 这里get 和dio 冲突, 选用get方式弄formData</span>
               dioData<span class="token punctuation">.</span>FormData formData <span class="token operator">=</span> dioData<span class="token punctuation">.</span>FormData<span class="token punctuation">.</span><span class="token function">fromMap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                 <span class="token string-property property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token keyword">await</span> dioData<span class="token punctuation">.</span>MultipartFile<span class="token punctuation">.</span><span class="token function">fromFile</span><span class="token punctuation">(</span>
                   file<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
                 <span class="token punctuation">)</span>
               <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token comment">/* FormData formData = FormData({&quot;file&quot;: await MultipartFile(file.path, filename: 'avatar.png')});*/</span>
               <span class="token keyword">var</span> resdata <span class="token operator">=</span> <span class="token keyword">await</span> InboundApi<span class="token punctuation">.</span><span class="token function">uploadimg</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">if</span> <span class="token punctuation">(</span>resdata<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token keyword">return</span> resdata<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'previewUrl'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                 <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
             <span class="token punctuation">}</span>
           <span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token literal-property property">onRemove</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
           <span class="token literal-property property">imageFit</span><span class="token operator">:</span> BoxFit<span class="token punctuation">.</span>contain<span class="token punctuation">,</span>
         <span class="token punctuation">)</span>
       <span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 

 <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>successfn<span class="token punctuation">,</span> catchFn<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   Map postData <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token string-property property">&quot;customerCode&quot;</span><span class="token operator">:</span> customerCode<span class="token punctuation">,</span>
     <span class="token string-property property">&quot;lpCode&quot;</span><span class="token operator">:</span> lpCode<span class="token punctuation">,</span>
     <span class="token string-property property">&quot;orderDetailList&quot;</span><span class="token operator">:</span> orderDetailList<span class="token punctuation">,</span>
     <span class="token string-property property">&quot;stackingNumber&quot;</span><span class="token operator">:</span> step1NoController<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
     <span class="token string-property property">&quot;orderNo&quot;</span><span class="token operator">:</span> orderNo<span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
   ShiftReturnApi<span class="token punctuation">.</span><span class="token function">insertReturnOrder</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       successfn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">successfn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
       Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
     
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
   
 <span class="token punctuation">}</span>

 <span class="token function">checkStep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>postData<span class="token punctuation">,</span> successfn<span class="token punctuation">,</span> clickType<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// 检验接口</span>
   <span class="token comment">// mock</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>clickType <span class="token operator">==</span> <span class="token string">'next-step1'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token string">'3'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">/*// 未知商品
       showDialog(context: context, builder: (_){
         return MyNDialog(
             title: null,
             message: '未知商品, 是否继续添加',
             showCancelButton: true,
             confirmButtonText: '添加',
             onConfirm: () {
               nextStep();
             },
             onCancel: () {});
       });*/</span>
       <span class="token function">nextStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
       <span class="token function">nextStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>clickType <span class="token operator">==</span> <span class="token string">'next-step2'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 新增一条数据</span>
     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       imagesList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">AddData</span><span class="token punctuation">(</span>success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token function">nextStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
     <span class="token function">nextStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 
 <span class="token punctuation">}</span>
 
 <span class="token function">nextStep</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     step <span class="token operator">=</span> step <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
       <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 
 <span class="token comment">// 处理图片数据(step为3时操作)</span>
 <span class="token function">handleImageData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>success<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* orderDetailList.add({
   &quot;goodsStatus&quot;: customeStatus,
   &quot;goodsWydSku&quot;: step2NoController.text,
   &quot;number&quot;: QTY,
    &quot;fileInfoList&quot;: imagesList,
   });*/</span>
   <span class="token comment">// 找到最后一条数据, 吧他的fileInfoList 修改一下</span>
   orderDetailList<span class="token punctuation">[</span>orderDetailList<span class="token punctuation">.</span>length <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'fileInfoList'</span><span class="token punctuation">]</span> <span class="token operator">=</span> imagesList<span class="token punctuation">;</span>
   success <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token comment">// 插入一条数据 点击step2 下一步操作</span>
 <span class="token function">AddData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>success<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   orderDetailList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token string-property property">&quot;goodsStatus&quot;</span><span class="token operator">:</span> customeStatus<span class="token punctuation">,</span>
     <span class="token string-property property">&quot;goodsWydSku&quot;</span><span class="token operator">:</span> step2NoController<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
     <span class="token string-property property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token constant">QTY</span><span class="token punctuation">,</span>
     <span class="token string-property property">&quot;fileInfoList&quot;</span><span class="token operator">:</span> imagesList<span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   success <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token comment">// 重置</span>
 <span class="token keyword">void</span> <span class="token function">initData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>stepData <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">print</span><span class="token punctuation">(</span>stepData<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>stepData <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
       tableData1 <span class="token operator">=</span> <span class="token punctuation">{</span>
         <span class="token string">&quot;returnString4&quot;</span><span class="token punctuation">.</span>tr<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
         <span class="token string">&quot;returnString5&quot;</span><span class="token punctuation">.</span>tr<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
       <span class="token punctuation">}</span><span class="token punctuation">;</span>
       <span class="token constant">QTY</span> <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span>
       step1NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
       step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
       step2_1NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
       status <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>stepData <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'进入这里'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     c<span class="token punctuation">.</span>orderDetailList <span class="token operator">=</span> orderDetailList<span class="token punctuation">;</span>
     <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       step <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
       <span class="token constant">QTY</span> <span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span>
       customeStatus <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
       step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
       step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
       status <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
       disableCustomerCode <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

<span class="token comment">/*  @override
 Future&lt;void&gt; getPdaResult(String result) async {
   print('触发');
   if (ModalRoute.of(context)!.isCurrent) {
     if (_focusNode.hasFocus) {
       _focusNode.unfocus();
     }
     String code = result.trim();
     print('${code}-----&gt;');
    */</span> <span class="token comment">/* context.read&lt;ShelfViewModel&gt;().setPalletizeText(text: code);
     context.read&lt;ShelfViewModel&gt;().saveCurrentSelfPalletize();*/</span> <span class="token comment">/*
   }
 }*/</span>

<span class="token comment">// 创建dom结构</span>

<span class="token comment">/* void setStorage() async{
   final nameListCopy = json.decode(json.encode(nameList));
   for(var i = 0; i&lt; 10; i++) {
     nameListCopy.add({
       &quot;sourceLocation&quot;: '小2明${i}',
        &quot;shiftNum&quot;: i,
     });
   }
   LocalStorage.setString('nameList', json.encode(nameListCopy));
   String? localstring_nameList = await LocalStorage.getString('nameList');
   if (localstring_nameList != null) {
     List localList_nameList = json.decode(localstring_nameList);
     print(localList_nameList);
   }
 }*/</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="处理退件-2"><a href="#处理退件-2" class="header-anchor">#</a> 处理退件</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'package:division/division.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter/material.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter/services.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter_vant_kit/widgets/dialog.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter_vant_kit/widgets/stepper.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:get/get.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/http/inbound.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/http/shiftReturn.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/page/outbound/components/body.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/page/return/page/mixinData.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/routers/return_router.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/utils/local_utils.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/utils/my_colors.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/commonStepDescribe.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_UI.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_btn.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_no_data.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_scanText.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:pda/widgets/common_table.dart'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'package:flutter_screenutil/flutter_screenutil.dart'</span><span class="token punctuation">;</span>


<span class="token keyword">class</span> <span class="token class-name">SolveReturnOrderController</span> <span class="token keyword">extends</span> <span class="token class-name">GetxController</span> <span class="token punctuation">{</span>
  List addReturnOrder <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>obs<span class="token punctuation">;</span>

  <span class="token comment">// 初始化操作</span>
  <span class="token function">initAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addReturnOrder <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 存入一条数据</span>
  <span class="token function">addOneToAddShiftSheetList</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    addReturnOrder<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 去重</span>
    <span class="token comment">// var checkInfo = [];</span>
    <span class="token comment">// addReturnOrder = Utils.uniqeList(dataList:addReturnOrder, checkInfo: checkInfo );</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 上报成功后操作</span>
  <span class="token function">submitCompleteAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">class</span> <span class="token class-name">SolveReturnOrder</span> <span class="token keyword">extends</span> <span class="token class-name">StatelessWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function">SolveReturnOrder</span><span class="token punctuation">(</span><span class="token punctuation">{</span>Key<span class="token operator">?</span> key<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token operator">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
  @override
  Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    final SolveReturnOrderController c <span class="token operator">=</span> Get<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token function">SolveReturnOrderController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化</span>
    c<span class="token punctuation">.</span><span class="token function">initAddShiftSheetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">Scaffold</span><span class="token punctuation">(</span>
        <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
      <span class="token literal-property property">appBar</span><span class="token operator">:</span> <span class="token function">AppBar</span><span class="token punctuation">(</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token function">Text</span><span class="token punctuation">(</span><span class="token string">'returnString26'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">centerTitle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">/*actions: &lt;Widget&gt;[
          IconButton(
              icon: Icon(Icons.list_alt),
              onPressed: () =&gt; {
                Get.toNamed(ReturnOrderRouter.solveReturnOrderDetail),
              }),
        ],*/</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token function">ContentBox</span><span class="token punctuation">(</span>key<span class="token operator">:</span> solveReturnOrderGlobalKey<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

GlobalKey<span class="token operator">&lt;</span>_ContentState<span class="token operator">&gt;</span> solveReturnOrderGlobalKey <span class="token operator">=</span> <span class="token function">GlobalKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ContentBox</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function">ContentBox</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    Key<span class="token operator">?</span> key<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">super</span><span class="token punctuation">(</span>key<span class="token operator">:</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

  _ContentState <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">_ContentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">_ContentState</span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token operator">&lt;</span>ContentBox<span class="token operator">&gt;</span> <span class="token keyword">with</span> fliterData<span class="token punctuation">{</span>
  FocusNode _focusNode <span class="token operator">=</span> <span class="token function">FocusNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  final SolveReturnOrderController c <span class="token operator">=</span> Get<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  int step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  final step1NoController <span class="token operator">=</span> <span class="token function">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  final step2NoController <span class="token operator">=</span> <span class="token function">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  final orderNo <span class="token operator">=</span> Get<span class="token punctuation">.</span>arguments<span class="token punctuation">[</span><span class="token string">'orderNo'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string">''</span><span class="token punctuation">;</span>
  
  bool step1ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  bool step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

  <span class="token comment">// late Map tableData1;</span>
  
  String Step1Name <span class="token operator">=</span> <span class="token string">'next'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
  String Step2Name <span class="token operator">=</span> <span class="token string">'next'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
  
  List orderDetailListAll <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 当前单子所有列表(包含已上报等信息)</span>
  List orderDetailList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 未操作列表(全)</span>
  List orderDetailSearchList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 用未操作列表--搜索</span>
  List orderDetailListShow <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// 未操作列表--展示</span>
  List goodsShelveDetailList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// setp2上传数据列表</span>
  List goodsShelveDetailListShow <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// setp2上传数据列表--展示</span>
  Map selectedItem <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 选中的信息</span>
  String warehouseArea <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 库区</span>
  
  String customerCode <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// 客户号</span>
  <span class="token comment">// int cumulativeCount = 1; // 累计值, 大于合计时候可以上架</span>
  num cumulativeCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 累计值, 大于合计时候可以上架</span>
  num maxNUmber <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span> <span class="token comment">// 最大值</span>
  num <span class="token constant">QTY</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// step2选择的number</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initData</span><span class="token punctuation">(</span>stepData<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  @override
  Widget <span class="token function">build</span><span class="token punctuation">(</span><span class="token parameter">BuildContext context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">Center</span><span class="token punctuation">(</span>
        <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Column</span><span class="token punctuation">(</span>children<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token function">Expanded</span><span class="token punctuation">(</span>
              <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">SingleChildScrollView</span><span class="token punctuation">(</span>
                <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Column</span><span class="token punctuation">(</span>
                  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">_changeContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
            <span class="token function">CommonBtn</span><span class="token punctuation">(</span>
                <span class="token literal-property property">text</span><span class="token operator">:</span> Step1Name<span class="token punctuation">,</span>
                <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>themeColor<span class="token punctuation">,</span>
                <span class="token literal-property property">textColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
                <span class="token literal-property property">enable</span><span class="token operator">:</span> step1ButtonEnable<span class="token punctuation">,</span>
                <span class="token literal-property property">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token function">checkStep</span><span class="token punctuation">(</span>
                    <span class="token literal-property property">clickType</span><span class="token operator">:</span> Step1Name <span class="token operator">==</span> <span class="token string">'returnDialog6'</span><span class="token punctuation">.</span>tr <span class="token operator">?</span> <span class="token string">'destory'</span> <span class="token operator">:</span> <span class="token string">'step-next'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
              <span class="token comment">// onPressed: null,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
            <span class="token function">CommonBtn</span><span class="token punctuation">(</span>
                <span class="token literal-property property">text</span><span class="token operator">:</span> Step2Name<span class="token punctuation">,</span>
                <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">60.0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>themeColor<span class="token punctuation">,</span>
                <span class="token literal-property property">textColor</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
                <span class="token literal-property property">enable</span><span class="token operator">:</span> step2ButtonEnable<span class="token punctuation">,</span>
                <span class="token literal-property property">onPressed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token function">checkStep</span><span class="token punctuation">(</span>
                    <span class="token literal-property property">clickType</span><span class="token operator">:</span> Step2Name <span class="token operator">==</span> <span class="token string">'returnDialog7'</span><span class="token punctuation">.</span>tr <span class="token operator">?</span> <span class="token string">'submit'</span> <span class="token operator">:</span> <span class="token string">'setp2-next'</span><span class="token punctuation">,</span>
                  <span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
              <span class="token comment">// onPressed: null,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">_changeContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">Column</span><span class="token punctuation">(</span>children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">StepDescribe</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'shiftSheetString13'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// Divider(),</span>
        <span class="token function">ScanText</span><span class="token punctuation">(</span>
          <span class="token literal-property property">onKey</span><span class="token operator">:</span> onKey<span class="token punctuation">,</span>
          <span class="token literal-property property">controller</span><span class="token operator">:</span> step1NoController<span class="token punctuation">,</span>
          <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'shiftSheetString15'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
          <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">onSubmitted</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">keyComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Container</span><span class="token punctuation">(</span>
          <span class="token literal-property property">height</span><span class="token operator">:</span> MediaQuery<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">290</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
          <span class="token literal-property property">child</span><span class="token operator">:</span>  <span class="token function">SingleChildScrollView</span><span class="token punctuation">(</span>
            <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Column</span><span class="token punctuation">(</span>
              <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>orderDetailSearchList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
                  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> orderDetailSearchList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
                    <span class="token function">Parent</span><span class="token punctuation">(</span>
                      <span class="token literal-property property">style</span><span class="token operator">:</span> orderDetailSearchList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'isPress'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token operator">?</span> <span class="token function">cardStyleBlack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">cardStyleWhite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">StepTable</span><span class="token punctuation">(</span>
                        <span class="token literal-property property">dataInfo</span><span class="token operator">:</span> orderDetailListShow<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">keyWidth</span><span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">paddingtop</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">paddingbottom</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                      <span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token literal-property property">gesture</span><span class="token operator">:</span> <span class="token function">Gestures</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">onTap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">itemTap</span><span class="token punctuation">(</span>index<span class="token operator">:</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span>
                  <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token operator">...</span><span class="token punctuation">[</span>
                  <span class="token function">Expanded</span><span class="token punctuation">(</span>
                      <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">CommonNoDataBox</span><span class="token punctuation">(</span>
                    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'no-data'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                    <span class="token literal-property property">height</span><span class="token operator">:</span> MediaQuery<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">290</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
                  <span class="token punctuation">)</span>
                  <span class="token punctuation">)</span>
                <span class="token punctuation">]</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">Column</span><span class="token punctuation">(</span>children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">StepDescribe</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'returnString27'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// Divider(),</span>
        <span class="token function">ScanText</span><span class="token punctuation">(</span>
          <span class="token literal-property property">onKey</span><span class="token operator">:</span> onKey<span class="token punctuation">,</span>
          <span class="token literal-property property">controller</span><span class="token operator">:</span> step2NoController<span class="token punctuation">,</span>
          <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'returnString28'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
          <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">onSubmitted</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">keyComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Parent</span><span class="token punctuation">(</span>style<span class="token operator">:</span> <span class="token function">ParentStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">15</span><span class="token punctuation">.</span>sp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span>background<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span>MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Row</span><span class="token punctuation">(</span>
            <span class="token literal-property property">mainAxisAlignment</span><span class="token operator">:</span> MainAxisAlignment<span class="token punctuation">.</span>center<span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Widget<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token function">Txt</span><span class="token punctuation">(</span><span class="token string">'${cumulativeCount + QTY} / ${selectedItem['</span>returnNum<span class="token string">']}'</span><span class="token punctuation">,</span> <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token function">TxtStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">textColor</span><span class="token punctuation">(</span>MyColors<span class="token punctuation">.</span>colorGreen<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Container</span><span class="token punctuation">(</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
          <span class="token literal-property property">color</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">,</span>
          <span class="token comment">// padding: EdgeInsets.fromLTRB(10, 10, 10,10),</span>
          <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">MyStepper</span><span class="token punctuation">(</span>
            <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token constant">QTY</span><span class="token punctuation">.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">inputWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
            <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
            <span class="token literal-property property">onChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token constant">QTY</span> <span class="token operator">=</span> int<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">print</span><span class="token punctuation">(</span><span class="token constant">QTY</span><span class="token punctuation">.</span>runtimeType<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">changeStepName</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">Container</span><span class="token punctuation">(</span>
          <span class="token literal-property property">height</span><span class="token operator">:</span> MediaQuery<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">-</span> <span class="token number">400</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
          <span class="token literal-property property">width</span><span class="token operator">:</span> MediaQuery<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
          <span class="token literal-property property">child</span><span class="token operator">:</span>  <span class="token function">SingleChildScrollView</span><span class="token punctuation">(</span>
            <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">Column</span><span class="token punctuation">(</span>
              <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>goodsShelveDetailList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
                  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> goodsShelveDetailList<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">...</span><span class="token punctuation">[</span>
                    <span class="token function">Parent</span><span class="token punctuation">(</span>
                      <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token function">ParentStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">padding</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                      <span class="token literal-property property">child</span><span class="token operator">:</span> <span class="token function">StepTable</span><span class="token punctuation">(</span>
                        <span class="token literal-property property">dataInfo</span><span class="token operator">:</span> goodsShelveDetailList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">keyWidth</span><span class="token operator">:</span> <span class="token number">180</span><span class="token punctuation">.</span>sp<span class="token punctuation">,</span>
                        <span class="token literal-property property">paddingtop</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                        <span class="token literal-property property">paddingbottom</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                      <span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span>
                  <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token operator">...</span><span class="token punctuation">[</span>
                
                <span class="token punctuation">]</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
   
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
 
  
  
  <span class="token comment">// 接口检验和新增</span>
  <span class="token keyword">void</span> <span class="token function">checkStep</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>postData<span class="token punctuation">,</span> successfn<span class="token punctuation">,</span> clickType<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// mock</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>clickType <span class="token operator">==</span> <span class="token string">'destory'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">destoryOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>clickType <span class="token operator">==</span> <span class="token string">'step-next'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          step <span class="token operator">=</span> step <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">changeStepName</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 设置累计值</span>
      <span class="token function">setcumulativeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>clickType <span class="token operator">==</span> <span class="token string">'setp2-next'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">findWarehouseCodeByLocation</span><span class="token punctuation">(</span>success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 查看输入的数据是否可填</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>cumulativeCount <span class="token operator">+</span> <span class="token constant">QTY</span> <span class="token operator">&gt;</span> maxNUmber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'returnString29'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">AddData</span><span class="token punctuation">(</span>success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">initData</span><span class="token punctuation">(</span>stepData<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>clickType <span class="token operator">==</span> <span class="token string">'submit'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">findWarehouseCodeByLocation</span><span class="token punctuation">(</span>success<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>cumulativeCount <span class="token operator">+</span> <span class="token constant">QTY</span> <span class="token operator">&gt;</span> maxNUmber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'returnString29'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">AddData</span><span class="token punctuation">(</span>
              <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">submit</span><span class="token punctuation">(</span>
                  <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token comment">/*  Utils.toast('上架成功');
                    initData(stepData: 1);*/</span>
                    <span class="token comment">/*Future.delayed(Duration(seconds: 2), (){
                      initData(stepData: 1);
                    });*/</span>
                    <span class="token function">showDialog</span><span class="token punctuation">(</span>
                      <span class="token literal-property property">context</span><span class="token operator">:</span> context<span class="token punctuation">,</span>
                      <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token function">MyNDialog</span><span class="token punctuation">(</span>
                          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'returnMessage4'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                          <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'confirm'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                          <span class="token literal-property property">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token function">initData</span><span class="token punctuation">(</span>stepData<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                          <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token literal-property property">falseFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>goodsShelveDetailList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                      <span class="token comment">// 删除加的那条数据</span>
                      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        goodsShelveDetailList<span class="token punctuation">.</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token function">initData</span><span class="token punctuation">(</span>stepData<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">void</span> <span class="token function">keyComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// step1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 找库区</span>
      <span class="token function">findWarehouseCodeByLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 检查button是否可点</span>
    <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// sku模糊查询</span>
  <span class="token function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 选择框都为空</span>
      orderDetailSearchList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        element<span class="token punctuation">[</span><span class="token string">'isPress'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 清空当前选择内容</span>
      selectedItem<span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// 检查按钮是否可点击</span>
      <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
      orderDetailSearchList <span class="token operator">=</span> orderDetailList<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">[</span><span class="token string">'goodsWydSku'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>step1NoController<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      orderDetailListShow <span class="token operator">=</span> <span class="token function">orderDetailSearchListToorderDetailListShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// print(orderDetailSearchList);</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>step1NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> step1NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>orderDetailSearchList<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">itemTap</span><span class="token punctuation">(</span>
            <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
           <span class="token comment">/* success: () {
              checkStep(
                clickType: 'step-next',
              );
            },*/</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 上架提交</span>
  <span class="token function">submit</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>success<span class="token punctuation">,</span> falseFn<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Map postData <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;detailId&quot;</span><span class="token operator">:</span> selectedItem<span class="token punctuation">[</span><span class="token string">'detailId'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;returnOrderNo&quot;</span><span class="token operator">:</span> orderNo<span class="token punctuation">,</span>
      <span class="token string-property property">&quot;goodsShelveDetailList&quot;</span><span class="token operator">:</span> goodsShelveDetailList<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    ShiftReturnApi<span class="token punctuation">.</span><span class="token function">returnOrderShelve</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        success <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        falseFn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">falseFn</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      falseFn <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">falseFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token punctuation">}</span>

  <span class="token comment">// 查找库位是否在系统内</span>
  <span class="token function">findWarehouseCodeByLocation</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>callback<span class="token punctuation">,</span> success<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> postData <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;warehouseLocation&quot;</span><span class="token operator">:</span> step2NoController<span class="token punctuation">.</span>text
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    ShiftReturnApi<span class="token punctuation">.</span><span class="token function">findWarehouseCodeByLocation</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// mock</span>
     <span class="token comment">/* res = {
        &quot;code&quot;: &quot;000000&quot;,
        &quot;data&quot;: {
          &quot;warehouseArea&quot;: &quot;123123&quot;,
          &quot;warehouseLocation&quot;: &quot;123123&quot;
        },
        &quot;msg&quot;: &quot;SUCCESS&quot;,
        &quot;success&quot;: true
      };*/</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'warehouseArea'</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         warehouseArea <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'warehouseArea'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
         success <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
         Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'returnMessage5'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           warehouseArea <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
           step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 插入一条数据 点击step2 下一步操作</span>
  <span class="token function">AddData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>success<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      goodsShelveDetailList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;shelveNumber&quot;</span><span class="token operator">:</span> <span class="token constant">QTY</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;warehouseArea&quot;</span><span class="token operator">:</span> warehouseArea<span class="token punctuation">,</span>
        <span class="token string-property property">&quot;warehouseLocation&quot;</span><span class="token operator">:</span> step2NoController<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      success <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
   
  <span class="token punctuation">}</span>
  <span class="token comment">// 获取累计值</span>
  <span class="token function">getCumulativeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    num count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>goodsShelveDetailList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      goodsShelveDetailList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// print('shelveNumber ${item['shelveNumber']} ${item} -- ${item['shelveNumber'].runtimeType.toString()}');</span>
        count <span class="token operator">=</span> count <span class="token operator">+</span> item<span class="token punctuation">[</span><span class="token string">'shelveNumber'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// print('count ${count.runtimeType.toString()}');</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 检验是否可以下一步</span>
  <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// print(&quot;selectedItem  ${selectedItem} &quot;);</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>selectedItem<span class="token punctuation">.</span>isEmpty <span class="token operator">==</span> <span class="token boolean">true</span> <span class="token operator">||</span> selectedItem <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        step1ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        step1ButtonEnable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// step2</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>step2NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> step2NoController<span class="token punctuation">.</span>text <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 监听键盘点击事件</span>
  <span class="token keyword">void</span> <span class="token function">onKey</span><span class="token punctuation">(</span><span class="token parameter">RawKeyEvent event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   
  <span class="token punctuation">}</span>
  <span class="token comment">// 设置累计值</span>
  <span class="token function">setcumulativeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cumulativeCount <span class="token operator">=</span> <span class="token function">getCumulativeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 转化step的name</span>
  <span class="token function">changeStepName</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>step<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cumulativeCount<span class="token operator">+</span> <span class="token constant">QTY</span> <span class="token operator">&gt;=</span> maxNUmber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Step2Name <span class="token operator">=</span> <span class="token string">'returnDialog7'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        Step2Name <span class="token operator">=</span> <span class="token string">'returnDialog8'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 销毁和下一步</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>selectedItem<span class="token punctuation">[</span><span class="token string">'processType'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Step1Name <span class="token operator">=</span> <span class="token string">'returnDialog6'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        Step1Name <span class="token operator">=</span> <span class="token string">'returnDialog8'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 重置</span>
  <span class="token keyword">void</span> <span class="token function">initData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>stepData <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>stepData <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/*tableData1 = {
          &quot;SKU&quot;: &quot;&quot;,
          &quot;Status&quot;: &quot;&quot;,
          &quot;Require&quot;: &quot;&quot;,
        };*/</span>
        step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        step1NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        step1ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        Step1Name <span class="token operator">=</span> <span class="token string">'returnDialog8'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
        Step2Name <span class="token operator">=</span> <span class="token string">'returnDialog8'</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>
        selectedItem <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token constant">QTY</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        cumulativeCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        maxNUmber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        warehouseArea <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        goodsShelveDetailList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        goodsShelveDetailListShow <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        orderDetailListAll <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        orderDetailList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        orderDetailListShow <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        orderDetailSearchList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        warehouseArea <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>stepData <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">'走了第二部'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        step <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        step2NoController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        step2ButtonEnable <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token constant">QTY</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
       
      <span class="token comment">/*  QTY = 1;
        warehouseArea = '';
        cumulativeCount = getCumulativeCount() + QTY;
        maxNUmber = selectedItem['returnNum'] - getCumulativeCount();*/</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setcumulativeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">changeStepName</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">/*setState(() {
        try{
          print('${getCumulativeCount()} ----');
          cumulativeCount = getCumulativeCount() + QTY;
         
        }catch(e){
          print('${e}cumulativeCount ${cumulativeCount}');
        }
       
      })*/</span><span class="token punctuation">;</span>
     
    <span class="token punctuation">}</span>
   
  <span class="token punctuation">}</span>

  <span class="token comment">// 获取详情数据</span>
  <span class="token keyword">void</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> dynamic<span class="token operator">&gt;</span> postData <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;returnOrderNo&quot;</span><span class="token operator">:</span> orderNo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    ShiftReturnApi<span class="token punctuation">.</span><span class="token function">queryReturnOrderListdetail</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resData<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// mock</span>
      <span class="token comment">/*resData = {
        &quot;code&quot;: &quot;000000&quot;,
        &quot;msg&quot;: &quot;操作成功&quot;,
        &quot;data&quot;: {
          &quot;returnOrderNo&quot;: &quot;ROCAJW3220613701&quot;,
          &quot;lpCode&quot;: &quot;UPS&quot;,
          &quot;stackingNumber&quot;: &quot;32234234&quot;,
          &quot;processNum&quot;: null,
          &quot;operationNum&quot;: 5,
          &quot;orderNo&quot;: &quot;&quot;,
          &quot;createTime&quot;: null,
          &quot;customerCode&quot;: '123123123',
          &quot;orderDetailList&quot;: [
            {
              &quot;detailId&quot;: &quot;b9dd84cd86cd2d9e421adc123d4d48b4&quot;,
              &quot;goodsWydSku&quot;: &quot;wk1&quot;,
              &quot;goodsStatus&quot;: &quot;0&quot;,
              &quot;returnNum&quot;: 5,
              &quot;processNum&quot;: null,
              &quot;processType&quot;: &quot;1&quot;,
              &quot;processResult&quot;: &quot;0&quot;
            },
            {
              &quot;detailId&quot;: &quot;b9dd84cd86cd2d9e421adc123d4d48b2&quot;,
              &quot;goodsWydSku&quot;: &quot;wk2&quot;,
              &quot;goodsStatus&quot;: &quot;0&quot;,
              &quot;returnNum&quot;: 5,
              &quot;processNum&quot;: null,
              &quot;processType&quot;: &quot;0&quot;,
              &quot;processResult&quot;: &quot;0&quot;
            },
            {
              &quot;detailId&quot;: &quot;b9dd84cd86cd2d9e421adc123d4d48b3&quot;,
              &quot;goodsWydSku&quot;: &quot;wk3&quot;,
              &quot;goodsStatus&quot;: &quot;0&quot;,
              &quot;returnNum&quot;: 5,
              &quot;processNum&quot;: null,
              &quot;processType&quot;: &quot;0&quot;,
              &quot;processResult&quot;: &quot;0&quot;
            },
          ]
        },
        &quot;success&quot;: true
      };*/</span>
      
      <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          customerCode<span class="token operator">=</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'customerCode'</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'orderDetailList'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          
          <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            orderDetailListAll <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            orderDetailList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            orderDetailListAll <span class="token operator">=</span> resData<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'orderDetailList'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            orderDetailListAll<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
              <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">[</span><span class="token string">'processResult'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> oneMap <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                  <span class="token string-property property">&quot;isPress&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                orderDetailList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>oneMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
                orderDetailSearchList <span class="token operator">=</span> orderDetailList<span class="token punctuation">;</span>
                orderDetailListShow <span class="token operator">=</span> <span class="token function">orderDetailSearchListToorderDetailListShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>orderDetailList<span class="token punctuation">.</span>isEmpty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">showDialog</span><span class="token punctuation">(</span>
                      <span class="token literal-property property">context</span><span class="token operator">:</span> context<span class="token punctuation">,</span>
                      <span class="token literal-property property">builder</span><span class="token operator">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> <span class="token function">MyNDialog</span><span class="token punctuation">(</span>
                          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'returnMessage6'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                          <span class="token literal-property property">showCancelButton</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">confirmButtonText</span><span class="token operator">:</span> <span class="token string">'confirm'</span><span class="token punctuation">.</span>tr<span class="token punctuation">,</span>
                          <span class="token literal-property property">onConfirm</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            Get<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                          <span class="token punctuation">}</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">onCancel</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
  <span class="token punctuation">}</span>
  
  <span class="token comment">// 销毁</span>
  <span class="token function">destoryOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> postData <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;customerCode&quot;</span><span class="token operator">:</span> customerCode<span class="token punctuation">,</span>
      <span class="token string-property property">&quot;detailId&quot;</span><span class="token operator">:</span> selectedItem<span class="token punctuation">[</span><span class="token string">'detailId'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    ShiftReturnApi<span class="token punctuation">.</span><span class="token function">destoryreturnOrderDesTroy</span><span class="token punctuation">(</span>postData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'success'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 销毁</span>
        <span class="token comment">// getData();</span>
        Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span><span class="token string">'returnMessage7'</span><span class="token punctuation">.</span>tr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initData</span><span class="token punctuation">(</span>stepData<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        Utils<span class="token punctuation">.</span><span class="token function">toast</span><span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catchError</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>
      
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 转化成展示列表数据</span>
  <span class="token function">orderDetailSearchListToorderDetailListShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    List ListShow <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>orderDetailSearchList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      orderDetailSearchList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ListShow<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token string-property property">&quot;SKU&quot;</span><span class="token operator">:</span> element<span class="token punctuation">[</span><span class="token string">'goodsWydSku'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;Status&quot;</span><span class="token operator">:</span> <span class="token function">filterGoodsStatus</span><span class="token punctuation">(</span>element<span class="token punctuation">[</span><span class="token string">'goodsStatus'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;Require&quot;</span><span class="token operator">:</span> <span class="token function">filterProcessType</span><span class="token punctuation">(</span>element<span class="token punctuation">[</span><span class="token string">'processType'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;Result&quot;</span><span class="token operator">:</span> <span class="token function">filterProcessResult</span><span class="token punctuation">(</span>element<span class="token punctuation">[</span><span class="token string">'processResult'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;Qty&quot;</span><span class="token operator">:</span> element<span class="token punctuation">[</span><span class="token string">'returnNum'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">return</span> ListShow<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   *  样式选择类
   */</span>
  <span class="token function">cardStyleWhite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>pressed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">ParentStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">border</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>whiteColor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">cardStyleBlack</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>pressed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">ParentStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">border</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> MyColors<span class="token punctuation">.</span>themeColor<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">margin</span><span class="token punctuation">(</span>all<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">itemTap</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>index<span class="token punctuation">,</span> success<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// orderDetailSearchList 搜索列表 orderDetailList 未操作数据列表</span>
      orderDetailSearchList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        element<span class="token punctuation">[</span><span class="token string">'isPress'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      orderDetailSearchList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'isPress'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token comment">// 设置selectedItem</span>
      orderDetailList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">[</span><span class="token string">'detailId'</span><span class="token punctuation">]</span> <span class="token operator">==</span> orderDetailSearchList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'detailId'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          selectedItem <span class="token operator">=</span> element<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 检查按钮是否可点击</span>
      <span class="token function">checkButtonEnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 销毁和下一步</span>
      <span class="token function">changeStepName</span><span class="token punctuation">(</span>step<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      maxNUmber <span class="token operator">=</span> selectedItem<span class="token punctuation">[</span><span class="token string">'returnNum'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token function">print</span><span class="token punctuation">(</span>selectedItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
      success <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">last updated:</span> <span class="time">1/11/2023, 11:35:12 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vuepress-starter/pages/project/pda/putaway.html" class="prev">
        入库-上架
      </a></span> <span class="next"><a href="/vuepress-starter/pages/project/pda/inventory.html">
        盘点单
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vuepress-starter/assets/js/app.746763ae.js" defer></script><script src="/vuepress-starter/assets/js/2.b2f8d863.js" defer></script><script src="/vuepress-starter/assets/js/7.a96ddcc6.js" defer></script>
  </body>
</html>
